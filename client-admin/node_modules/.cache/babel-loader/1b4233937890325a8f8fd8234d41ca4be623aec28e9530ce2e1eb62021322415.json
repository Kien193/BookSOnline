{"ast":null,"code":"import _classCallCheck from\"D:/VLU/ShoppeClone/client-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/VLU/ShoppeClone/client-admin/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/VLU/ShoppeClone/client-admin/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/VLU/ShoppeClone/client-admin/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import axios from'axios';import React,{Component}from'react';import MyContext from'../contexts/Mycontext';import ProductDetail from'./ProductDetailComponent';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Product=/*#__PURE__*/function(_Component){_inherits(Product,_Component);var _super=_createSuper(Product);// using this.context to access global state\nfunction Product(props){var _this;_classCallCheck(this,Product);_this=_super.call(this,props);_this.updateProducts=function(products,noPages){// arrow-function\n_this.setState({products:products,noPages:noPages});};_this.state={products:[],noPages:0,curPage:1,itemSelected:null};return _this;}_createClass(Product,[{key:\"render\",value:function render(){var _this2=this;var prods=this.state.products.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",onClick:function onClick(){return _this2.trItemClick(item);},children:[/*#__PURE__*/_jsx(\"td\",{children:item._id}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.price}),/*#__PURE__*/_jsx(\"td\",{children:new Date(item.cdate).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:item.category.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpg;base64,\"+item.image,width:\"100px\",height:\"100px\",alt:\"\"})})]},item._id);});var pagination=Array.from({length:this.state.noPages},function(_,index){if(index+1===_this2.state.curPage){return/*#__PURE__*/_jsxs(\"span\",{children:[\"| \",/*#__PURE__*/_jsx(\"b\",{children:index+1}),\" |\"]},index);}else{return/*#__PURE__*/_jsxs(\"span\",{className:\"link\",onClick:function onClick(){return _this2.lnkPageClick(index+1);},children:[\"| \",index+1,\" |\"]},index);}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"float-left\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"PRODUCT LIST\"}),/*#__PURE__*/_jsx(\"table\",{className:\"datatable\",border:\"1\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Creation date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"})]}),prods,/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",children:pagination})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"inline\"}),/*#__PURE__*/_jsx(ProductDetail,{item:this.state.itemSelected,curPage:this.state.curPage,updateProducts:this.updateProducts}),/*#__PURE__*/_jsx(\"div\",{className:\"float-clear\"})]});}},{key:\"componentDidMount\",value:function componentDidMount(){this.apiGetProducts(this.state.curPage);}// event-handlers\n},{key:\"lnkPageClick\",value:function lnkPageClick(index){this.apiGetProducts(index);}},{key:\"trItemClick\",value:function trItemClick(item){this.setState({itemSelected:item});}// apis\n},{key:\"apiGetProducts\",value:function apiGetProducts(page){var _this3=this;var config={headers:{'x-access-token':this.context.token}};axios.get('/api/admin/products?page='+page,config).then(function(res){var result=res.data;_this3.setState({products:result.products,noPages:result.noPages,curPage:result.curPage});});}}]);return Product;}(Component);Product.contextType=MyContext;export default Product;","map":{"version":3,"names":["axios","React","Component","MyContext","ProductDetail","jsx","_jsx","jsxs","_jsxs","Product","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","updateProducts","products","noPages","setState","state","curPage","itemSelected","_createClass","key","value","render","_this2","prods","map","item","className","onClick","trItemClick","children","_id","name","price","Date","cdate","toLocaleString","category","src","image","width","height","alt","pagination","Array","from","length","_","index","lnkPageClick","border","colSpan","componentDidMount","apiGetProducts","page","_this3","config","headers","context","token","get","then","res","result","data","contextType"],"sources":["D:/VLU/ShoppeClone/client-admin/src/components/ProductComponent.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport MyContext from '../contexts/Mycontext';\r\nimport ProductDetail from './ProductDetailComponent';\r\n\r\nclass Product extends Component {\r\n  static contextType = MyContext; // using this.context to access global state\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      products: [],\r\n      noPages: 0,\r\n      curPage: 1,\r\n      itemSelected: null\r\n    };\r\n  }\r\n  render() {\r\n    const prods = this.state.products.map((item) => {\r\n      return (\r\n        <tr key={item._id} className=\"datatable\" onClick={() => this.trItemClick(item)}>\r\n          <td>{item._id}</td>\r\n          <td>{item.name}</td>\r\n          <td>{item.price}</td>\r\n          <td>{new Date(item.cdate).toLocaleString()}</td>\r\n          <td>{item.category.name}</td>\r\n          <td><img src={\"data:image/jpg;base64,\" + item.image} width=\"100px\" height=\"100px\" alt=\"\" /></td>\r\n        </tr>\r\n      );\r\n    });\r\n    const pagination = Array.from({ length: this.state.noPages }, (_, index) => {\r\n      if ((index + 1) === this.state.curPage) {\r\n        return (<span key={index}>| <b>{index + 1}</b> |</span>);\r\n      } else {\r\n        return (<span key={index} className=\"link\" onClick={() => this.lnkPageClick(index + 1)}>| {index + 1} |</span>);\r\n      }\r\n    });\r\n    return (\r\n      <div>\r\n        <div className=\"float-left\">\r\n          <h2 className=\"text-center\">PRODUCT LIST</h2>\r\n          <table className=\"datatable\" border=\"1\">\r\n            <tbody>\r\n              <tr className=\"datatable\">\r\n                <th>ID</th>\r\n                <th>Name</th>\r\n                <th>Price</th>\r\n                <th>Creation date</th>\r\n                <th>Category</th>\r\n                <th>Image</th>\r\n              </tr>\r\n              {prods}\r\n              <tr>\r\n                <td colSpan=\"6\">{pagination}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"inline\" />\r\n          <ProductDetail item={this.state.itemSelected} curPage={this.state.curPage} updateProducts={this.updateProducts} />\r\n        <div className=\"float-clear\" />\r\n      </div>\r\n    );\r\n  }\r\n  updateProducts = (products, noPages) => { // arrow-function\r\n    this.setState({ products: products, noPages: noPages });\r\n  }\r\n  componentDidMount() {\r\n    this.apiGetProducts(this.state.curPage);\r\n  }\r\n  // event-handlers\r\n  lnkPageClick(index) {\r\n    this.apiGetProducts(index);\r\n  }\r\n  trItemClick(item) {\r\n    this.setState({ itemSelected: item });\r\n  }\r\n  // apis\r\n  apiGetProducts(page) {\r\n    const config = { headers: { 'x-access-token': this.context.token } };\r\n    axios.get('/api/admin/products?page=' + page, config).then((res) => {\r\n      const result = res.data;\r\n      this.setState({ products: result.products, noPages: result.noPages, curPage: result.curPage });\r\n    });\r\n  }\r\n}\r\nexport default Product;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
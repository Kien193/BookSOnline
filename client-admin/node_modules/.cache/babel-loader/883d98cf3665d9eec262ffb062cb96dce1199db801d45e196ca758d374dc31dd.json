{"ast":null,"code":"import _classCallCheck from\"D:/VLU/ShoppeClone/client-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/VLU/ShoppeClone/client-admin/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/VLU/ShoppeClone/client-admin/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/VLU/ShoppeClone/client-admin/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import axios from'axios';import React,{Component}from'react';import MyContext from'../contexts/Mycontext';import ProductDetail from'./ProductDetailComponent';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Product=/*#__PURE__*/function(_Component){_inherits(Product,_Component);var _super=_createSuper(Product);// using this.context to access global state\nfunction Product(props){var _this;_classCallCheck(this,Product);_this=_super.call(this,props);_this.updateProducts=function(products,noPages){// arrow-function\n_this.setState({products:products,noPages:noPages});};_this.state={products:[],noPages:0,curPage:1,itemSelected:null};return _this;}_createClass(Product,[{key:\"render\",value:function render(){var _this2=this;var prods=this.state.products.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",onClick:function onClick(){return _this2.trItemClick(item);},children:[/*#__PURE__*/_jsx(\"td\",{children:item._id}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.author}),/*#__PURE__*/_jsx(\"td\",{children:item.price}),/*#__PURE__*/_jsx(\"td\",{children:new Date(item.cdate).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:item.category.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpg;base64,\"+item.image,width:\"100px\",height:\"100px\",alt:\"\"})})]},item._id);});var pagination=Array.from({length:this.state.noPages},function(_,index){if(index+1===_this2.state.curPage){return/*#__PURE__*/_jsx(\"li\",{class:\"page-item\",children:/*#__PURE__*/_jsx(\"button\",{class:\"page-link\",onClick:function onClick(){return _this2.lnkPageClick(index+1);},children:/*#__PURE__*/_jsx(\"b\",{children:index+1})})},index);}else{return/*#__PURE__*/ (// <span key={index} className=\"link\" onClick={() => this.lnkPageClick(index + 1)}>\n//   | {index + 1} |\n// </span>\n_jsx(\"li\",{class:\"page-item\",children:/*#__PURE__*/_jsx(\"button\",{class:\"page-link\",onClick:function onClick(){return _this2.lnkPageClick(index+1);},children:index+1})},index));}});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container row mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"PRODUCT LIST\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark datatable \",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Author\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Creation date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{style:{cursor:'pointer'},children:prods})]}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Page navigation example\",children:/*#__PURE__*/_jsx(\"ul\",{class:\"pagination justify-content-center\",children:pagination})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container row mt-1\",children:/*#__PURE__*/_jsx(ProductDetail,{item:this.state.itemSelected,curPage:this.state.curPage,updateProducts:this.updateProducts})})]});}},{key:\"componentDidMount\",value:function componentDidMount(){this.apiGetProducts(this.state.curPage);}// event-handlers\n},{key:\"lnkPageClick\",value:function lnkPageClick(index){this.apiGetProducts(index);}},{key:\"trItemClick\",value:function trItemClick(item){this.setState({itemSelected:item});}// apis\n},{key:\"apiGetProducts\",value:function apiGetProducts(page){var _this3=this;var config={headers:{'x-access-token':this.context.token}};axios.get('/api/admin/products?page='+page,config).then(function(res){var result=res.data;_this3.setState({products:result.products,noPages:result.noPages,curPage:result.curPage});});}}]);return Product;}(Component);Product.contextType=MyContext;export default Product;","map":{"version":3,"names":["axios","React","Component","MyContext","ProductDetail","jsx","_jsx","jsxs","_jsxs","Product","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","updateProducts","products","noPages","setState","state","curPage","itemSelected","_createClass","key","value","render","_this2","prods","map","item","className","onClick","trItemClick","children","_id","name","author","price","Date","cdate","toLocaleString","category","src","image","width","height","alt","pagination","Array","from","length","_","index","class","lnkPageClick","style","cursor","componentDidMount","apiGetProducts","page","_this3","config","headers","context","token","get","then","res","result","data","contextType"],"sources":["D:/VLU/ShoppeClone/client-admin/src/components/ProductComponent.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport MyContext from '../contexts/Mycontext';\r\nimport ProductDetail from './ProductDetailComponent';\r\n\r\nclass Product extends Component {\r\n  static contextType = MyContext; // using this.context to access global state\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      products: [],\r\n      noPages: 0,\r\n      curPage: 1,\r\n      itemSelected: null\r\n    };\r\n  }\r\n  render() {\r\n    const prods = this.state.products.map((item) => {\r\n      return (\r\n        <tr key={item._id} className=\"datatable\" onClick={() => this.trItemClick(item)}>\r\n          <td>{item._id}</td>\r\n          <td>{item.name}</td>\r\n          <td>{item.author}</td>\r\n          <td>{item.price}</td>\r\n          <td>{new Date(item.cdate).toLocaleString()}</td>\r\n          <td>{item.category.name}</td>\r\n          <td><img src={\"data:image/jpg;base64,\" + item.image} width=\"100px\" height=\"100px\" alt=\"\" /></td>\r\n        </tr>\r\n      );\r\n    });\r\n    const pagination = Array.from({ length: this.state.noPages }, (_, index) => {\r\n      if ((index + 1) === this.state.curPage) {\r\n        return (\r\n          <li class=\"page-item\" key={index}>\r\n            <button class=\"page-link\" onClick={() => this.lnkPageClick(index + 1)}>\r\n              <b>{index + 1}</b>\r\n            </button>\r\n          </li>\r\n        );\r\n      } else {\r\n        return (\r\n          // <span key={index} className=\"link\" onClick={() => this.lnkPageClick(index + 1)}>\r\n          //   | {index + 1} |\r\n          // </span>\r\n          <li class=\"page-item\" key={index}>\r\n            <button class=\"page-link\" onClick={() => this.lnkPageClick(index + 1)}>\r\n              {index + 1}\r\n            </button>\r\n          </li>\r\n        );\r\n      }\r\n    });\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"container row mt-5\">\r\n          <h2 className=\"text-center\">PRODUCT LIST</h2>\r\n          <table className=\"table table-bordered\">\r\n            <thead className=\"thead-dark datatable \">\r\n              <tr className='datatable'>\r\n                <th>ID</th>\r\n                <th>Name</th>\r\n                {/* add author */}\r\n                <th>Author</th>\r\n                <th>Price</th>\r\n                <th>Creation date</th>\r\n                <th>Category</th>\r\n                <th>Image</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody style={{cursor: 'pointer'}}>{prods}</tbody>\r\n          </table>\r\n          <tr>\r\n            <nav aria-label=\"Page navigation example\">\r\n              <ul class=\"pagination justify-content-center\">\r\n                {pagination}\r\n              </ul>\r\n            </nav>\r\n          </tr> \r\n        </div>\r\n        <div className=\"container row mt-1\">\r\n          <ProductDetail item={this.state.itemSelected} curPage={this.state.curPage} updateProducts={this.updateProducts} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  updateProducts = (products, noPages) => { // arrow-function\r\n    this.setState({ products: products, noPages: noPages });\r\n  }\r\n  componentDidMount() {\r\n    this.apiGetProducts(this.state.curPage);\r\n  }\r\n  // event-handlers\r\n  lnkPageClick(index) {\r\n    this.apiGetProducts(index);\r\n  }\r\n  trItemClick(item) {\r\n    this.setState({ itemSelected: item });\r\n  }\r\n  // apis\r\n  apiGetProducts(page) {\r\n    const config = { headers: { 'x-access-token': this.context.token } };\r\n    axios.get('/api/admin/products?page=' + page, config).then((res) => {\r\n      const result = res.data;\r\n      this.setState({ products: result.products, noPages: result.noPages, curPage: result.curPage });\r\n    });\r\n  }\r\n}\r\nexport default Product;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
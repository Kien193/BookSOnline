{"ast":null,"code":"import _classCallCheck from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import axios from'axios';import React,{Component}from'react';import{Navigate}from'react-router-dom';import MyContext from'../contexts/MyContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Myorders=/*#__PURE__*/function(_Component){_inherits(Myorders,_Component);var _super=_createSuper(Myorders);// using this.context to access global state\nfunction Myorders(props){var _this;_classCallCheck(this,Myorders);_this=_super.call(this,props);_this.state={orders:[],order:null};return _this;}_createClass(Myorders,[{key:\"render\",value:function render(){var _this2=this;if(this.context.token==='')return/*#__PURE__*/_jsx(Navigate,{replace:true,to:\"/login\"});var orders=this.state.orders.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",onClick:function onClick(){return _this2.trItemClick(item);},children:[/*#__PURE__*/_jsx(\"td\",{children:item._id}),/*#__PURE__*/_jsx(\"td\",{children:new Date(item.cdate).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:item.customer.name}),/*#__PURE__*/_jsx(\"td\",{children:item.customer.phone}),/*#__PURE__*/_jsx(\"td\",{children:item.total}),/*#__PURE__*/_jsx(\"td\",{children:item.status})]},item._id);});if(this.state.order){var items=this.state.order.items.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:item.product._id}),/*#__PURE__*/_jsx(\"td\",{children:item.product.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpg;base64,\"+item.product.image,width:\"70px\",height:\"70px\",alt:\"\"})}),/*#__PURE__*/_jsx(\"td\",{children:item.product.author}),/*#__PURE__*/_jsx(\"td\",{children:item.product.price}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{children:item.product.price*item.quantity})]},item.product._id);});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"align-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"ORDER LIST\"}),/*#__PURE__*/_jsx(\"table\",{className:\"datatable\",border:\"1\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Creation date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cust.name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cust.phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]}),orders]})})]}),this.state.order?/*#__PURE__*/_jsxs(\"div\",{className:\"align-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"ORDER DETAIL\"}),/*#__PURE__*/_jsx(\"table\",{className:\"datatable\",border:\"1\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Prod.ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Prod.name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Author\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"})]}),items]})})]}):/*#__PURE__*/_jsx(\"div\",{})]});}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.context.customer){var cid=this.context.customer._id;this.apiGetOrdersByCustID(cid);}}// event-handlers\n},{key:\"trItemClick\",value:function trItemClick(item){this.setState({order:item});}// apis\n},{key:\"apiGetOrdersByCustID\",value:function apiGetOrdersByCustID(cid){var _this3=this;var config={headers:{'x-access-token':this.context.token}};axios.get('/api/customer/orders/customer/'+cid,config).then(function(res){var result=res.data;_this3.setState({orders:result});});}}]);return Myorders;}(Component);Myorders.contextType=MyContext;export default Myorders;","map":{"version":3,"names":["axios","React","Component","Navigate","MyContext","jsx","_jsx","jsxs","_jsxs","Myorders","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","orders","order","_createClass","key","value","render","_this2","context","token","replace","to","map","item","className","onClick","trItemClick","children","_id","Date","cdate","toLocaleString","customer","name","phone","total","status","items","index","product","src","image","width","height","alt","author","price","quantity","border","componentDidMount","cid","apiGetOrdersByCustID","setState","_this3","config","headers","get","then","res","result","data","contextType"],"sources":["D:/VLU/ShoppeClone/client-customer/src/components/MyordersComponent.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport MyContext from '../contexts/MyContext';\r\n\r\nclass Myorders extends Component {\r\n  static contextType = MyContext; // using this.context to access global state\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      orders: [],\r\n      order: null\r\n    };\r\n  }\r\n  render() {\r\n    if (this.context.token === '') return (<Navigate replace to='/login' />);\r\n    const orders = this.state.orders.map((item) => {\r\n      return (\r\n        <tr key={item._id} className=\"datatable\" onClick={() => this.trItemClick(item)}>\r\n          <td>{item._id}</td>\r\n          <td>{new Date(item.cdate).toLocaleString()}</td>\r\n          <td>{item.customer.name}</td>\r\n          <td>{item.customer.phone}</td>\r\n          <td>{item.total}</td>\r\n          <td>{item.status}</td>\r\n        </tr>\r\n      );\r\n    });\r\n    if (this.state.order) {\r\n      var items = this.state.order.items.map((item, index) => {\r\n        return (\r\n          <tr key={item.product._id} className=\"datatable\">\r\n            <td>{index + 1}</td>\r\n            <td>{item.product._id}</td>\r\n            <td>{item.product.name}</td>\r\n            <td><img src={\"data:image/jpg;base64,\" + item.product.image} width=\"70px\" height=\"70px\" alt=\"\" /></td>\r\n            <td>{item.product.author}</td>\r\n            <td>{item.product.price}</td>\r\n            <td>{item.quantity}</td>\r\n            <td>{item.product.price * item.quantity}</td>\r\n          </tr>\r\n        );\r\n      });\r\n    }\r\n    return (\r\n      <div>\r\n        <div className=\"align-center\">\r\n          <h2 className=\"text-center\">ORDER LIST</h2>\r\n          <table className=\"datatable\" border=\"1\">\r\n            <tbody>\r\n              <tr className=\"datatable\">\r\n                <th>ID</th>\r\n                <th>Creation date</th>\r\n                <th>Cust.name</th>\r\n                <th>Cust.phone</th>\r\n                <th>Total</th>\r\n                <th>Status</th>\r\n              </tr>\r\n              {orders}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {this.state.order ?\r\n          <div className=\"align-center\">\r\n            <h2 className=\"text-center\">ORDER DETAIL</h2>\r\n            <table className=\"datatable\" border=\"1\">\r\n              <tbody>\r\n                <tr className=\"datatable\">\r\n                  <th>No.</th>\r\n                  <th>Prod.ID</th>\r\n                  <th>Prod.name</th>\r\n                  <th>Image</th>\r\n                  <th>Author</th>\r\n                  <th>Price</th>\r\n                  <th>Quantity</th>\r\n                  <th>Amount</th>\r\n                </tr>\r\n                {items}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          : <div />}\r\n      </div>\r\n    );\r\n  }\r\n  componentDidMount() {\r\n    if (this.context.customer) {\r\n      const cid = this.context.customer._id;\r\n      this.apiGetOrdersByCustID(cid);\r\n    }\r\n  }\r\n  // event-handlers\r\n  trItemClick(item) {\r\n    this.setState({ order: item });\r\n  }\r\n  // apis\r\n  apiGetOrdersByCustID(cid) {\r\n    const config = { headers: { 'x-access-token': this.context.token } };\r\n    axios.get('/api/customer/orders/customer/' + cid, config).then((res) => {\r\n      const result = res.data;\r\n      this.setState({ orders: result });\r\n    });\r\n  }\r\n}\r\nexport default Myorders;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _classCallCheck from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import axios from'axios';import React,{Component}from'react';import MyContext from'../contexts/MyContext';import withRouter from'../utils/withRouter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);// using this.context to access global state\nfunction Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={txtUsername:'',txtPassword:''};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"align-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"CUSTOMER LOGIN\"}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"table\",{className:\"align-center\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:this.state.txtUsername,onChange:function onChange(e){_this2.setState({txtUsername:e.target.value});}})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:this.state.txtPassword,onChange:function onChange(e){_this2.setState({txtPassword:e.target.value});}})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"LOGIN\",onClick:function onClick(e){return _this2.btnLoginClick(e);}})})]})]})})})]});}// event-handlers\n},{key:\"btnLoginClick\",value:function btnLoginClick(e){e.preventDefault();var username=this.state.txtUsername;var password=this.state.txtPassword;if(username&&password){var account={username:username,password:password};this.apiLogin(account);}else{alert('Please input username and password');}}// apis\n},{key:\"apiLogin\",value:function apiLogin(account){var _this3=this;axios.post('/api/customer/login',account).then(function(res){var result=res.data;if(result.success===true){_this3.context.setToken(result.token);_this3.context.setCustomer(result.customer);_this3.props.navigate('/home');}else{alert(result.message);}});}}]);return Login;}(Component);Login.contextType=MyContext;export default withRouter(Login);","map":{"version":3,"names":["axios","React","Component","MyContext","withRouter","jsx","_jsx","jsxs","_jsxs","Login","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","txtUsername","txtPassword","_createClass","key","value","render","_this2","className","children","type","onChange","e","setState","target","onClick","btnLoginClick","preventDefault","username","password","account","apiLogin","alert","_this3","post","then","res","result","data","success","context","setToken","token","setCustomer","customer","navigate","message","contextType"],"sources":["D:/VLU/ShoppeClone/client-customer/src/components/LoginComponent.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport MyContext from '../contexts/MyContext';\r\nimport withRouter from '../utils/withRouter';\r\n\r\nclass Login extends Component {\r\n  static contextType = MyContext; // using this.context to access global state\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      txtUsername: '',\r\n      txtPassword: ''\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"align-center\">\r\n        <h2 className=\"text-center\">CUSTOMER LOGIN</h2>\r\n        <form>\r\n          <table className=\"align-center\">\r\n            <tbody>\r\n              <tr>\r\n                <td>Username</td>\r\n                <td><input type=\"text\" value={this.state.txtUsername} onChange={(e) => { this.setState({ txtUsername: e.target.value }) }} /></td>\r\n              </tr>\r\n              <tr>\r\n                <td>Password</td>\r\n                <td><input type=\"password\" value={this.state.txtPassword} onChange={(e) => { this.setState({ txtPassword: e.target.value }) }} /></td>\r\n              </tr>\r\n              <tr>\r\n                <td></td>\r\n                <td><input type=\"submit\" value=\"LOGIN\" onClick={(e) => this.btnLoginClick(e)} /></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n  // event-handlers\r\n  btnLoginClick(e) {\r\n    e.preventDefault();\r\n    const username = this.state.txtUsername;\r\n    const password = this.state.txtPassword;\r\n    if (username && password) {\r\n      const account = { username: username, password: password };\r\n      this.apiLogin(account);\r\n    } else {\r\n      alert('Please input username and password');\r\n    }\r\n  }\r\n  // apis\r\n  apiLogin(account) {\r\n    axios.post('/api/customer/login', account).then((res) => {\r\n      const result = res.data;\r\n      if (result.success === true) {\r\n        this.context.setToken(result.token);\r\n        this.context.setCustomer(result.customer);\r\n        this.props.navigate('/home');\r\n      } else {\r\n        alert(result.message);\r\n      }\r\n    });\r\n  }\r\n}\r\nexport default withRouter(Login);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
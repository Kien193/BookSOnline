{"ast":null,"code":"import _classCallCheck from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import MyContext from'../contexts/MyContext';import CartUtil from'../utils/CartUtil';import axios from'axios';import withRouter from'../utils/withRouter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Mycart=/*#__PURE__*/function(_Component){_inherits(Mycart,_Component);var _super=_createSuper(Mycart);function Mycart(){_classCallCheck(this,Mycart);return _super.apply(this,arguments);}_createClass(Mycart,[{key:\"render\",value:// using this.context to access global state\nfunction render(){var _this=this;var mycart=this.context.mycart.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:item.product._id}),/*#__PURE__*/_jsx(\"td\",{children:item.product.name}),/*#__PURE__*/_jsx(\"td\",{children:item.product.category.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpg;base64,\"+item.product.image,width:\"70px\",height:\"70px\",alt:\"\"})}),/*#__PURE__*/_jsx(\"td\",{children:item.product.price}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{children:item.product.price*item.quantity}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"link\",onClick:function onClick(){return _this.lnkRemoveClick(item.product._id);},children:\"Remove\"})})]},item.product._id);});return/*#__PURE__*/_jsxs(\"div\",{className:\"align-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"ITEM LIST\"}),/*#__PURE__*/_jsx(\"table\",{className:\"datatable\",border:\"1\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"datatable\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]}),mycart,/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"td\",{children:CartUtil.getTotal(this.context.mycart)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"link\",onClick:function onClick(){return _this.lnkCheckoutClick();},children:\"CHECKOUT\"})})]})]})})]});}// event-handlers\n},{key:\"lnkRemoveClick\",value:function lnkRemoveClick(id){var mycart=this.context.mycart;var index=mycart.findIndex(function(x){return x.product._id===id;});if(index!==-1){// found, remove item\nmycart.splice(index,1);this.context.setMycart(mycart);}}},{key:\"lnkCheckoutClick\",value:function lnkCheckoutClick(){if(window.confirm('ARE YOU SURE?')){if(this.context.mycart.length>0){var total=CartUtil.getTotal(this.context.mycart);var items=this.context.mycart;var customer=this.context.customer;if(customer){this.apiCheckout(total,items,customer);}else{this.props.navigate('/login');}}else{alert('Your cart is empty');}}}// apis\n},{key:\"apiCheckout\",value:function apiCheckout(total,items,customer){var _this2=this;var body={total:total,items:items,customer:customer};var config={headers:{'x-access-token':this.context.token}};axios.post('/api/customer/checkout',body,config).then(function(res){var result=res.data;if(result){alert('OK BABY!');_this2.context.setMycart([]);_this2.props.navigate('/home');}else{alert('SORRY BABY!');}});}}]);return Mycart;}(Component);Mycart.contextType=MyContext;export default withRouter(Mycart);","map":{"version":3,"names":["React","Component","MyContext","CartUtil","axios","withRouter","jsx","_jsx","jsxs","_jsxs","Mycart","_Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","render","_this","mycart","context","map","item","index","className","children","product","_id","name","category","src","image","width","height","alt","price","quantity","onClick","lnkRemoveClick","border","colSpan","getTotal","lnkCheckoutClick","id","findIndex","x","splice","setMycart","window","confirm","length","total","items","customer","apiCheckout","props","navigate","alert","_this2","body","config","headers","token","post","then","res","result","data","contextType"],"sources":["D:/VLU/ShoppeClone/client-customer/src/components/MycartComponent.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport MyContext from '../contexts/MyContext';\r\nimport CartUtil from '../utils/CartUtil';\r\nimport axios from 'axios';\r\nimport withRouter from '../utils/withRouter';\r\n\r\nclass Mycart extends Component {\r\n  static contextType = MyContext; // using this.context to access global state\r\n  render() {\r\n    const mycart = this.context.mycart.map((item, index) => {\r\n      return (\r\n        <tr key={item.product._id} className=\"datatable\">\r\n          <td>{index + 1}</td>\r\n          <td>{item.product._id}</td>\r\n          <td>{item.product.name}</td>\r\n          <td>{item.product.category.name}</td>\r\n          <td><img src={\"data:image/jpg;base64,\" + item.product.image} width=\"70px\" height=\"70px\" alt=\"\" /></td>\r\n          <td>{item.product.price}</td>\r\n          <td>{item.quantity}</td>\r\n          <td>{item.product.price * item.quantity}</td>\r\n          <td><span className=\"link\" onClick={() => this.lnkRemoveClick(item.product._id)}>Remove</span></td>\r\n        </tr>\r\n      );\r\n    });\r\n    return (\r\n      <div className=\"align-center\">\r\n        <h2 className=\"text-center\">ITEM LIST</h2>\r\n        <table className=\"datatable\" border=\"1\">\r\n          <tbody>\r\n            <tr className=\"datatable\">\r\n              <th>No.</th>\r\n              <th>ID</th>\r\n              <th>Name</th>\r\n              <th>Category</th>\r\n              <th>Image</th>\r\n              <th>Price</th>\r\n              <th>Quantity</th>\r\n              <th>Amount</th>\r\n              <th>Action</th>\r\n            </tr>\r\n            {mycart}\r\n            <tr>\r\n              <td colSpan=\"6\"></td>\r\n              <td>Total</td>\r\n              <td>{CartUtil.getTotal(this.context.mycart)}</td>\r\n              <td><span className=\"link\" onClick={() => this.lnkCheckoutClick()}>CHECKOUT</span></td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n  // event-handlers\r\n  lnkRemoveClick(id) {\r\n    const mycart = this.context.mycart;\r\n    const index = mycart.findIndex(x => x.product._id === id);\r\n    if (index !== -1) { // found, remove item\r\n      mycart.splice(index, 1);\r\n      this.context.setMycart(mycart);\r\n    }\r\n  }\r\n  lnkCheckoutClick() {\r\n    if (window.confirm('ARE YOU SURE?')) {\r\n      if (this.context.mycart.length > 0) {\r\n        const total = CartUtil.getTotal(this.context.mycart);\r\n        const items = this.context.mycart;\r\n        const customer = this.context.customer;\r\n        if (customer) {\r\n          this.apiCheckout(total, items, customer);\r\n        } else {\r\n          this.props.navigate('/login');\r\n        }\r\n      } else {\r\n        alert('Your cart is empty');\r\n      }\r\n    }\r\n  }\r\n  // apis\r\n  apiCheckout(total, items, customer) {\r\n    const body = { total: total, items: items, customer: customer };\r\n    const config = { headers: { 'x-access-token': this.context.token } };\r\n    axios.post('/api/customer/checkout', body, config).then((res) => {\r\n      const result = res.data;\r\n      if (result) {\r\n        alert('OK BABY!');\r\n        this.context.setMycart([]);\r\n        this.props.navigate('/home');\r\n      } else {\r\n        alert('SORRY BABY!');\r\n      }\r\n    });\r\n  }\r\n}\r\nexport default withRouter(Mycart);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
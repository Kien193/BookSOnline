{"ast":null,"code":"import _classCallCheck from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/VLU/ShoppeClone/client-customer/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import axios from'axios';import React,{Component}from'react';import withRouter from'../utils/withRouter';import MyContext from'../contexts/MyContext';import swal from'sweetalert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductDetail=/*#__PURE__*/function(_Component){_inherits(ProductDetail,_Component);var _super=_createSuper(ProductDetail);// using this.context to access global state\nfunction ProductDetail(props){var _this;_classCallCheck(this,ProductDetail);_this=_super.call(this,props);_this.state={product:null,txtQuantity:1};return _this;}_createClass(ProductDetail,[{key:\"render\",value:function render(){var _this2=this;var prod=this.state.product;if(prod!=null){return/*#__PURE__*/_jsxs(\"div\",{className:\"align-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"PRODUCT DETAILS\"}),/*#__PURE__*/_jsxs(\"figure\",{className:\"caption-right\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpg;base64,\"+prod.image,width:\"600px\",height:\"600px\",alt:\"\"}),/*#__PURE__*/_jsx(\"figcaption\",{children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{children:[\"ID: \",prod._id]})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"h1\",{children:prod.name})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"h4\",{children:[prod.price,\"$\"]})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"h4\",{class:\"fw-bold\",children:prod.category.name})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"div\",{class:\"d-flex\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control text-center me-3\",type:\"number\",min:\"1\",max:\"99\",value:this.state.txtQuantity,onChange:function onChange(e){_this2.setState({txtQuantity:e.target.value});}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-dark \",type:\"submit\",onClick:function onClick(e){return _this2.btnAdd2CartClick(e);},children:\"Add to cart\"})]})})]})})})})]})]});}return/*#__PURE__*/_jsx(\"div\",{});}// event-handlers\n},{key:\"btnAdd2CartClick\",value:function btnAdd2CartClick(e){e.preventDefault();var product=this.state.product;var quantity=parseInt(this.state.txtQuantity);if(quantity<100){var mycart=this.context.mycart;var index=mycart.findIndex(function(x){return x.product._id===product._id;});// check if the _id exists in mycart\nif(index===-1){// not found, push newItem\nvar newItem={product:product,quantity:quantity};mycart.push(newItem);}else{// increasing the quantity\nmycart[index].quantity+=quantity;}this.context.setMycart(mycart);//this.props.navigate('/home');\n//alert('OK BABY!');\n}else{swal('Error','Invalid quantity!','error');}}},{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.params;this.apiGetProduct(params.id);}// apis\n},{key:\"apiGetProduct\",value:function apiGetProduct(id){var _this3=this;axios.get('/api/customer/products/'+id).then(function(res){var result=res.data;_this3.setState({product:result});});}}]);return ProductDetail;}(Component);ProductDetail.contextType=MyContext;export default withRouter(ProductDetail);","map":{"version":3,"names":["axios","React","Component","withRouter","MyContext","swal","jsx","_jsx","jsxs","_jsxs","ProductDetail","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","product","txtQuantity","_createClass","key","value","render","_this2","prod","className","children","src","image","width","height","alt","_id","name","price","class","category","type","min","max","onChange","e","setState","target","onClick","btnAdd2CartClick","preventDefault","quantity","parseInt","mycart","context","index","findIndex","x","newItem","push","setMycart","componentDidMount","params","apiGetProduct","id","_this3","get","then","res","result","data","contextType"],"sources":["D:/VLU/ShoppeClone/client-customer/src/components/ProductDetailComponent.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport withRouter from '../utils/withRouter';\r\nimport MyContext from '../contexts/MyContext';\r\nimport swal from 'sweetalert';\r\n\r\nclass ProductDetail extends Component {\r\n  static contextType = MyContext; // using this.context to access global state\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      product: null,\r\n      txtQuantity: 1\r\n    };\r\n  }\r\n  render() {\r\n    const prod = this.state.product;\r\n    if (prod != null) {\r\n      return (\r\n        <div className=\"align-center\">\r\n          <h2 className=\"text-center\">PRODUCT DETAILS</h2>\r\n          <figure className=\"caption-right\">\r\n            <img src={\"data:image/jpg;base64,\" + prod.image} width=\"600px\" height=\"600px\" alt=\"\" />\r\n            <figcaption>\r\n              <form>\r\n                <table>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td>ID: {prod._id}</td>\r\n                    </tr>\r\n                    <tr>\r\n                      {/* <td align=\"right\">Name:</td> */}\r\n                      <h1>{prod.name}</h1>\r\n                    </tr>\r\n                    <tr>\r\n                      <h4>{prod.price}$</h4>\r\n                    </tr>\r\n                    <tr>\r\n                      <h4 class='fw-bold'>{prod.category.name}</h4>\r\n                    </tr>\r\n                    <tr>\r\n                      <div class='d-flex'>\r\n                        <input className='form-control text-center me-3' type=\"number\" min=\"1\" max=\"99\" value={this.state.txtQuantity} onChange={(e) => { this.setState({ txtQuantity: e.target.value }) }} />\r\n                        \r\n                        <button className=\"btn btn-outline-dark \" type=\"submit\" onClick={(e) => this.btnAdd2CartClick(e)}>\r\n                          Add to cart\r\n                        </button>\r\n                      </div>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </form>\r\n            </figcaption>\r\n          </figure>\r\n        </div>\r\n      );\r\n    }\r\n    return (<div />);\r\n  }\r\n  // event-handlers\r\n  btnAdd2CartClick(e) {\r\n    e.preventDefault();\r\n    const product = this.state.product;\r\n    const quantity = parseInt(this.state.txtQuantity);\r\n    if (quantity < 100) {\r\n      const mycart = this.context.mycart;\r\n      const index = mycart.findIndex(x => x.product._id === product._id); // check if the _id exists in mycart\r\n      if (index === -1) { // not found, push newItem\r\n        const newItem = { product: product, quantity: quantity };\r\n        mycart.push(newItem);\r\n      } else { // increasing the quantity\r\n        mycart[index].quantity += quantity;\r\n      }\r\n      this.context.setMycart(mycart);\r\n      //this.props.navigate('/home');\r\n      //alert('OK BABY!');\r\n    } else {\r\n      swal('Error', 'Invalid quantity!', 'error');\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    const params = this.props.params;\r\n    this.apiGetProduct(params.id);\r\n  }\r\n  // apis\r\n  apiGetProduct(id) {\r\n    axios.get('/api/customer/products/' + id).then((res) => {\r\n      const result = res.data;\r\n      this.setState({ product: result });\r\n    });\r\n  }\r\n}\r\nexport default withRouter(ProductDetail);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}